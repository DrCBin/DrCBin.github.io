---
title: python学习之基础--字符串和编码
category: python
excerpt: |
    python学习系列笔记！
---

# 编码的问题 #

计算机最底层是以0,1为基础的数字逻辑。也就是说计算机最终处理的是数字，而且是二进制的数字。早期的计算机采用的是8比特(bit)作为一个字节，也就是8位二进制，所以一个字节能表示的范围是00000000(b)~11111111(b)共255个整数.

但是我们日常使用的都是文字，图片，声音等，所以我们就需要约定某种序列的数字来表示某个字母等。这个过程就叫做编码。

最早的计算机是美国发明的，而且美国的文字里面只有26个字母和其他一些常用符号，所以早起的计算机只有美国常用的127个字符被编码到计算机里。这个最早的编码被成为`ASCII`编码.上面我们说到，一个字节的表示范围是0-255，所以一个字节就足够编码127个字符了.

但是随着计算机在不同国家的普及，计算机就需要表示不同国家的文字，所以每个国家都会针对自己国家的文字进行编码设计，从而让计算机能正常显示。但问题是，有的国家的文字很多，比如中国的汉字，元超255个。所以说一字节就不够编码中文了，再加上还不能和`ASCII`中的编码重复.所以中国就制定`GB2312`编码来编码汉字，采用的是两个字节编码一个汉字.

但是随着互联网的发展，可能一个网页上会同时显示好几个国家的文字，这样，编码难免就会发生冲突。如果能有一种编码能编世界各国的语言，那不是好?所以`Unicode`出生了.`Unicode`采用两个字节编码一个字符的方式来编码各国的字符文字.

但是`Unicode`是固定的两个字节，如果是对于美国来说，大多数使用的都是英文，也就是那127个，一个字节就足够了，但`Unicode`却用两个字节？岂不浪费？

于是乎，可变长编码`UTF-8`诞生了.`UTF-8`把`Unicode`编码根据数值大小，分成1-6个字节来编码，通常英文字母就变一个字节，汉字三个字节，不常见的才使用4-6个字节，这样就能竟可能的节约了资源.

# python中的字符串 #

### Python中的字符串是使用Unicode编码的 ###

也就是说,python字符串是支持多国语言的.

python的字符串是以`Unicode`编码在内存中存储的.并且**以字节为单位**.

如果要将字符串在网络中传输，或保存到硬盘，则需要将字符串保存为以`bytes`为单位的方式。。

```python
# python使用带前缀b的字符串表示bytes类型的编码
x = b'Hello'
```

如果要将字符串保存到文件的时候，要尽量以`UTF-8`的编码保存。特别是字符中含有多种语言的时候.

```python
# 使用带前缀u的字符串表示UTF-8类型
x = u'中文'
```
`Unicode`类型的字符串可以调用`str.encode()`方法转变成以`bytes`为单位的指定编码

```oython
# 转换成以bytes为单位的ascii编码
a = 'ABC'.encode('ascii')
```

需要注意，含有中文或者超过`ascii`编码范围的字符串转换成`ascii`编码会报错.

------

### len()函数求字符串的长度 ###

`len()`:可以用来求字符串的字符个数。

如果字符串是以`bytes`为单位，这求的是字节(byte)数.

```python
#  普通字符串，求的是字符数
>>> len('你好')
2

# 求byte数
>>> len('你好'.encode('UTF-8'))
6

# 可见，一个中文utf使用三个字节编码
```

所以，当我们写python文件的时候，要在开头申明编码方式

```python
# -*- encoding: utf-8 -*-

def fun:
	pass
```
